{% extends "base.html" %}
{% block content %}
  <section class="panel capture-shell" style="margin-top: 18px;">
    <h3>Welcome to SFO</h3>
    <p class="muted">A short setup to anchor your Why and weekly focus. You can update any of this later.</p>
    <form method="post" action="/onboarding" class="form" data-onboarding-wizard>
      <input type="hidden" name="csrf_token" value="{{ csrf_token(request) }}">
      <div class="wizard-step" data-step="1">
        <div class="field">
          <span>Name</span>
          <input type="text" name="name" value="{{ profile.name if profile else '' }}" placeholder="Your name">
        </div>
        <div class="field">
          <span>Why (primary)</span>
          <textarea name="why_primary" rows="2" placeholder="The sentence that anchors you.">{{ profile.why_primary if profile else '' }}</textarea>
        </div>
      </div>

      <div class="wizard-step hidden" data-step="2">
        <div class="field">
          <span>Why (expanded)</span>
          <textarea name="why_expanded" rows="3" placeholder="Optional expansion, keep it human.">{{ profile.why_expanded if profile else '' }}</textarea>
        </div>
        <div class="field">
          <span>Values (comma separated)</span>
          <input type="text" name="values_text" value="{{ profile.values_text if profile else '' }}" placeholder="Presence, Courage, Craft">
        </div>
      </div>

      <div class="wizard-step hidden" data-step="3">
        <div class="field two">
          <label>
            <span>Energy profile</span>
            <select name="energy_profile">
              <option value="">Select...</option>
              <option value="morning" {% if profile and profile.energy_profile == 'morning' %}selected{% endif %}>Morning</option>
              <option value="afternoon" {% if profile and profile.energy_profile == 'afternoon' %}selected{% endif %}>Afternoon</option>
              <option value="evening" {% if profile and profile.energy_profile == 'evening' %}selected{% endif %}>Evening</option>
            </select>
          </label>
          <label>
            <span>Weekly review day</span>
            <select name="weekly_review_day">
              <option value="">Select...</option>
              {% for day in ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"] %}
                <option value="{{ day|lower }}" {% if profile and profile.weekly_review_day == day|lower %}selected{% endif %}>{{ day }}</option>
              {% endfor %}
            </select>
          </label>
        </div>
        <div class="field two">
          <label>
            <span>Workday start</span>
            <input type="time" name="workday_start" value="{{ profile.workday_start if profile and profile.workday_start else '' }}">
          </label>
          <label>
            <span>Workday end</span>
            <input type="time" name="workday_end" value="{{ profile.workday_end if profile and profile.workday_end else '' }}">
          </label>
        </div>
        <div class="field">
          <span>Focus block preference</span>
          <select name="focus_block_preference">
            <option value="">Select...</option>
            <option value="90" {% if profile and profile.focus_block_preference == '90' %}selected{% endif %}>90 minutes</option>
            <option value="105" {% if profile and profile.focus_block_preference == '105' %}selected{% endif %}>105 minutes</option>
            <option value="120" {% if profile and profile.focus_block_preference == '120' %}selected{% endif %}>120 minutes</option>
          </select>
        </div>
      </div>

      <div class="wizard-step hidden" data-step="4">
        <div class="field">
          <span>Work projects for this week (max 4)</span>
          <textarea name="work_projects" rows="4" placeholder="- Project one&#10;- Project two"></textarea>
        </div>
        <div class="field">
          <span>Personal projects for this week (max 3)</span>
          <textarea name="personal_projects" rows="4" placeholder="- Project one&#10;- Project two"></textarea>
        </div>
        <div class="note">Extra projects will be created but parked outside this week.</div>
      </div>

      <div class="wizard-actions">
        <button type="button" class="btn ghost" data-prev>Back</button>
        <button type="button" class="btn" data-next>Next</button>
        <button type="submit" class="btn hidden" data-submit>Finish setup</button>
      </div>
    </form>
  </section>
{% endblock %}
